(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=e(l);fetch(l.href,r)}})();function f(t,s){return Math.floor(Math.random()*(s-t))+t}const n=document.querySelector("#game"),d=n&&n.getContext("2d");if(n&&d){let t=16,s=0,e={x:160,y:160,dx:t,dy:0,cells:[],maxCells:4},i={x:320,y:320};const l=new Audio("./gulp.mp3"),r=()=>{requestAnimationFrame(r),!(++s<4)&&(s=0,d.clearRect(0,0,n.width,n.height),e.x+=e.dx,e.y+=e.dy,e.x<0?e.x=n.width-t:e.x>=n.width&&(e.x=0),e.y<0?e.y=n.height-t:e.y>=n.height&&(e.y=0),e.cells.unshift({x:e.x,y:e.y}),e.cells.length>e.maxCells&&e.cells.pop(),d.fillStyle="darkred",d.fillRect(i.x,i.y,t-1,t-1),d.fillStyle="lime",e.cells.forEach((o,y)=>{d.fillRect(o.x,o.y,t-1,t-1),o.x===i.x&&o.y===i.y&&(e.maxCells++,i.x=f(0,25)*t,i.y=f(0,25)*t,l.play());for(var c=y+1;c<e.cells.length;c++)o.x===e.cells[c].x&&o.y===e.cells[c].y&&(e.x=160,e.y=160,e.cells=[],e.maxCells=4,e.dx=t,e.dy=0,i.x=f(0,25)*t,i.y=f(0,25)*t)}))};document.addEventListener("keydown",o=>{o.which===37&&e.dx===0?(e.dx=-t,e.dy=0):o.which===38&&e.dy===0?(e.dy=-t,e.dx=0):o.which===39&&e.dx===0?(e.dx=t,e.dy=0):o.which===40&&e.dy===0&&(e.dy=t,e.dx=0)}),requestAnimationFrame(r)}
